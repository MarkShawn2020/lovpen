# LovPen 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
LovPen - 全媒体内容分发平台

### 1.2 产品定位
LovPen 是一个专为 Obsidian 用户设计的全媒体内容分发平台，旨在帮助用户将 Obsidian 笔记无缝转换并分发到主流社交媒体平台，保持格式完整性的同时实现一键多平台发布。

### 1.3 产品愿景
让知识创作者能够专注于内容创作，而不必担心不同平台的格式要求和发布流程，实现"一次创作，多平台分发"的理想体验。

### 1.4 目标用户
- **个人内容创作者**：使用 Obsidian 进行写作和知识管理的博主、作家
- **专业写作者**：技术博客作者、行业专家、教育工作者
- **企业和媒体机构**：需要多平台内容分发的组织和团队
- **知识工作者**：需要分享专业见解和经验的各行业从业者

## 2. 市场需求分析

### 2.1 市场痛点
1. **格式转换复杂**：不同平台对内容格式要求不同，手动转换费时费力
2. **多平台发布繁琐**：需要逐个平台登录、复制粘贴、调整格式
3. **样式一致性差**：各平台默认样式不统一，影响品牌形象
4. **链接处理困难**：微信公众号等平台不支持外链，需要特殊处理
5. **代码展示问题**：技术内容在各平台展示效果差异很大

### 2.2 解决方案优势
- **一键转换**：自动将 Markdown 转换为各平台适配格式
- **多平台同步**：一次操作，同时发布到多个平台
- **丰富主题**：30+ 精美主题，保持视觉一致性
- **智能链接处理**：自动处理外链限制问题
- **专业代码展示**：高质量代码高亮和格式化

## 3. 功能需求规格

### 3.1 核心功能模块

#### 3.1.1 内容转换引擎
**功能描述**：将 Obsidian Markdown 内容转换为各平台适配格式

**具体功能**：
- Markdown 解析和渲染
- 代码块语法高亮
- 数学公式渲染
- 图片处理和优化
- 表格格式化
- 引用块样式化

**技术要求**：
- 支持 CommonMark 标准
- 集成 highlight.js 代码高亮
- 支持 LaTeX 数学公式
- 响应式图片处理

#### 3.1.2 多平台分发系统
**功能描述**：将内容一键分发到多个社交媒体平台

**支持平台**：
- 微信公众号
- 知乎
- 小红书
- Twitter
- (可扩展其他平台)

**核心功能**：
- 平台适配器模式
- 批量发布管理
- 发布状态追踪
- 草稿保存功能
- 发布历史记录

#### 3.1.3 主题和样式系统
**功能描述**：提供丰富的视觉主题和自定义样式功能

**功能特性**：
- 30+ 预设主题
- 自定义 CSS 支持
- 代码高亮主题
- 模板系统
- 样式预览功能

#### 3.1.4 智能链接处理
**功能描述**：针对不同平台的链接限制提供智能解决方案

**处理策略**：
- 链接脚注转换
- 微信链接特殊处理
- 外链描述生成
- 链接有效性检查

### 3.2 高级功能模块

#### 3.2.1 模板管理系统
**功能描述**：允许用户创建和管理内容模板

**功能点**：
- 模板创建和编辑
- 模板变量支持
- 模板预览功能
- 模板导入导出

#### 3.2.2 封面设计器
**功能描述**：为内容生成专业封面图

**功能特性**：
- 多种封面模板
- 自定义文字和图片
- 品牌元素集成
- 一键生成和导出

#### 3.2.3 批量处理功能
**功能描述**：支持批量处理多篇文章

**应用场景**：
- 历史文章迁移
- 批量格式更新
- 定时发布管理

## 4. 用户体验设计

### 4.1 用户界面设计
- **简洁直观**：采用现代化 UI 设计，操作简单明了
- **实时预览**：提供所见即所得的预览功能
- **响应式设计**：适配不同屏幕尺寸

### 4.2 用户操作流程
1. **内容创作**：在 Obsidian 中完成内容创作
2. **样式选择**：选择合适的主题和样式
3. **内容预览**：实时预览转换效果
4. **平台选择**：选择目标发布平台
5. **一键发布**：执行批量发布操作

### 4.3 错误处理和反馈
- **实时状态反馈**：显示发布进度和状态
- **错误信息提示**：清晰的错误信息和解决建议
- **操作撤销**：支持关键操作的撤销功能

## 5. 技术架构设计

### 5.1 整体架构
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Obsidian      │    │   LovPen        │    │   目标平台      │
│   笔记内容      │───▶│   转换引擎      │───▶│   API 接口      │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 5.2 技术栈
- **前端框架**：React 19.1.0 + TypeScript
- **构建工具**：Vite + ESBuild
- **样式处理**：CSS + Handlebars 模板
- **包管理**：pnpm (monorepo)
- **代码高亮**：highlight.js
- **Markdown 处理**：marked + 自定义插件

### 5.3 模块化设计
- **packages/obsidian**：Obsidian 插件核心
- **packages/frontend**：React 前端组件
- **packages/shared**：共享工具库
- **packages/assets**：主题和资源文件

## 6. 数据安全和隐私保护

### 6.1 数据处理原则
- **本地优先**：内容处理主要在本地完成
- **最小化原则**：只收集必要的平台认证信息
- **用户控制**：用户完全控制发布内容和时机

### 6.2 安全措施
- **加密存储**：敏感配置信息加密保存
- **安全传输**：所有网络通信使用 HTTPS
- **权限管理**：严格控制平台 API 访问权限

## 7. 性能要求

### 7.1 响应时间
- **内容转换**：< 3 秒（单篇文章）
- **预览加载**：< 1 秒
- **平台发布**：< 10 秒/平台

### 7.2 稳定性要求
- **可用性**：99.9% 正常运行时间
- **错误恢复**：发布失败自动重试机制
- **数据完整性**：保证内容转换的准确性

## 8. 兼容性要求

### 8.1 平台兼容性
- **Obsidian 版本**：≥ 1.4.5
- **操作系统**：Windows, macOS, Linux
- **桌面和移动端**：支持桌面和移动端使用

### 8.2 浏览器兼容性
- **现代浏览器**：Chrome, Firefox, Safari, Edge
- **响应式设计**：适配不同屏幕尺寸

## 9. 维护和扩展

### 9.1 版本管理
- **语义化版本**：采用 SemVer 版本规范
- **向后兼容**：保持 API 和配置向后兼容
- **平滑升级**：提供自动升级机制

### 9.2 扩展能力
- **插件系统**：支持第三方插件开发
- **平台接入**：易于添加新的发布平台
- **主题扩展**：支持自定义主题开发

## 10. 项目里程碑

### 10.1 当前版本 (0.9.4)
- ✅ 基础内容转换功能
- ✅ 微信公众号发布
- ✅ 多主题支持
- ✅ 代码高亮功能
- ✅ 多平台分发框架

### 10.2 下一版本计划
- 🔄 用户体验优化
- 🔄 性能优化
- 🔄 更多平台支持
- 🔄 高级模板功能
- 🔄 批量处理功能

## 11. 成功指标

### 11.1 用户指标
- **用户增长**：月活用户增长率 > 20%
- **用户留存**：7 天留存率 > 60%
- **用户满意度**：用户评分 > 4.5/5.0

### 11.2 功能指标
- **转换成功率**：> 99%
- **发布成功率**：> 95%
- **平均处理时间**：< 5 秒/文章

### 11.3 技术指标
- **系统稳定性**：99.9% 可用性
- **错误率**：< 0.1%
- **性能指标**：首次加载时间 < 3 秒

---

**文档版本**：v1.0  
**最后更新**：2025-07-10  
**维护者**：LovPen 产品团队